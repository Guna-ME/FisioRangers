CREATE or alter PROCEDURE insert_log
    @Cod_Agenda integer,
    @nomeUsuario char(50) OUTPUT,
    @tipoOperacao char(50) output
    
AS
BEGIN
    select @nomeUsuario = nome from Agenda ag
    inner join Usuario us
    ON ag.Cod_Usuario=us.Cod_Usuario
    where cod_agenda= @Cod_Agenda;
       
    select @tipoOperacao = Tipo_Pagamento from Tipo_Pagamento tp
    inner join Pagamento P
    on P.cod_tipo=tp.cod_tipo
    inner join Servico s
    on p.cod_pagamento=s.cod_pagamento
    inner JOIN agenda a
    on a.cod_servico=s.cod_servico
    where cod_agenda = @cod_Agenda;
  end;
